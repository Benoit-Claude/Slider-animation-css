<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <title>TP 5 février</title>
</head>
<body>

    <ul id="navigation">
        <li>
            <a href="#slide1" accesskey="1">1</a>
        </li>
        <li>
            <a href="#slide2" accesskey="2">2</a>
        </li>
        <li>
            <a href="#slide3" accesskey="3">3</a>
        </li>
        <li>
            <a href="#slide4" accesskey="4">4</a>
        </li>
        <li>
            <a href="#slide5" accesskey="5">5</a>
        </li>
    </ul>
    <button class="avant">Avant</button>
    <div id="slider">
        <div id="slide1" class="courant">
            <h1>slide 1</h1>
            <p>Utque aegrum corpus quassari etiam levibus solet offensis, ita animus eius angustus et tener, quicquid increpuisset, ad salutis suae dispendium existimans factum aut cogitatum, insontium caedibus fecit victoriam luctuosam.</p>
        </div>
        <div id="slide2" class="apres-1">
            <h1>slide 2</h1>
            <p>Utque aegrum corpus quassari etiam levibus solet offensis, ita animus eius angustus et tener, quicquid increpuisset, ad salutis suae dispendium existimans factum aut cogitatum, insontium caedibus fecit victoriam luctuosam.</p>
        </div>
        <div id="slide3" class="apres-2">
            <h1>slide 3</h1>
            <p>Utque aegrum corpus quassari etiam levibus solet offensis, ita animus eius angustus et tener, quicquid increpuisset, ad salutis suae dispendium existimans factum aut cogitatum, insontium caedibus fecit victoriam luctuosam.</p>
        </div>
        <div id="slide4" class="apres-3">
            <h1>slide 4</h1>
            <p>Utque aegrum corpus quassari etiam levibus solet offensis, ita animus eius angustus et tener, quicquid increpuisset, ad salutis suae dispendium existimans factum aut cogitatum, insontium caedibus fecit victoriam luctuosam.</p>
        </div>
        <div id="slide5" class="apres-4">
            <h1>slide 5</h1>
            <p>Utque aegrum corpus quassari etiam levibus solet offensis, ita animus eius angustus et tener, quicquid increpuisset, ad salutis suae dispendium existimans factum aut cogitatum, insontium caedibus fecit victoriam luctuosam.</p>
        </div>
    </div>
    <button class="apres">Après</button>

    <script>

       (function (){
            "use strict";

           function clickSurUnLien (evt) {
                evt.preventDefault();
                var lien = this;
                var selecteurDuSlide = lien.getAttribute("href");
                console.log("le sélecteur CSS pour trouver le DIV : ", selecteurDuSlide);
                document.querySelector('.courant').classList.remove('courant');
                var nouveau = document.querySelector(selecteurDuSlide);
                nouveau.classList="";
                nouveau.classList.add('courant');

               var precedent = nouveau;
               var a = 1;
               while (precedent = precedent.previousElementSibling){
                   precedent.classList="";
                   precedent.classList.add("avant-" + a);
                   a++;
               }

               var suivant = nouveau;
               var u = 1;
               while ( suivant = suivant.nextElementSibling){
                   suivant.classList="";
                   suivant.classList.add("apres-"+u);
                   u++;
               }
            }

            let boutonsuivant = document.querySelectorAll('.slider>div');
            function clickBoutonSuivant (evt){
                evt.preventDefault();
                var boutonsuivant = document.querySelector('ouvert').nextElementSibling || document.querySelector('.slider>*:first-child') ;
                boutonsuivant.classList= '';
                boutonsuivant.classList.add('ouvert');

                let slideasuivant = boutonsuivant;
                let c = 1;
                while (slideasuivant = slideasuivant.previousElementSibling){
                    slideasuivant.classList = '';
                    slideasuivant.classList.add("avant-" + c);
                    c++;
                }

                let slideapsuivant = boutonsuivant;
                let d = 1;
                while (slideapsuivant = slideapsuivant.nextElementSibling) {
                    slideapsuivant.classList = '';
                    slideapsuivant.classList.add("apres-" + d);
                    d++;
                }
            }

            let boutonapres = document.querySelectorAll('slider>div');
            function clickBoutonapres(evt){
                evt.preventDefault();
                var boutonprecedent = document.querySelector('.ouvert').previousElementSibling || document.querySelector('.slider>*:last-child');
                boutonprecedent.classList = '';
                boutonprecedent.classList.add('ouvert');

                let slideaprecedent = boutonprecedent;
                let e = 1;
                while (slideaprecedent = slideaprecedent.previousElementSibling) {
                    slideaprecedent.classList = '';
                    slideaprecedent.classList.add("avant-" + e);
                    e++;
                }

                let slideapprecedent = boutonprecedent;
                let f = 1;
                while (slideapprecedent = slideapprecedent.nextElementSibling){
                    slideapprecedent.classList = '';
                    slideapprecedent.classList.add("apres-" + f);
                    f++;
                }
            }


            var listeLiens = document.querySelectorAll("#navigation>li>a");
            for (var i = 0; i < listeLiens.length; i++) {
                var unLien = listeLiens[i];
                unLien.addEventListener('click', clickSurUnLien);
            }

            for (var j = 0; j < (boutonsuivant.length - 1); j++) {
                var leliens = boutonsuivant[j];
                document.querySelector('.avant').addEventListener("click", clickBoutonSuivant);
            }

            for (var t = 0; t < boutonapres.length; t++){
                var lelien = boutonapres[t];
                document.querySelector('.apres').addEventListener("click", clickBoutonapres);
            }


        }());



    </script>

</body>
</html>